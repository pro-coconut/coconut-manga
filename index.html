<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coconut Manga - ƒê·ªçc truy·ªán tranh online</title>
<link rel="icon" href="data:,">

<style>
/* ===== BASE ===== */
body{
  margin:0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background:#fafafa;
  color:#333;
}

/* ===== HEADER ===== */
header{
  position:sticky;
  top:0;
  z-index:1000;
  background:#e74c3c;
  padding:15px 20px;
  color:#fff;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header h1{
  margin:0;
  font-size:1.8em;
  font-weight:bold;
}
.menu-btn{
  font-size:2em;
  cursor:pointer;
  background:none;
  border:none;
  color:#fff;
}

/* ===== DROPDOWN MENU ===== */
#nav-menu{
  position:absolute;
  top:60px;
  right:15px;
  width:260px;
  background:white;
  color:#333;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
  display:none;
  animation:fadeDown .25s ease;
}
@keyframes fadeDown{
  from{transform:translateY(-10px);opacity:0;}
  to{transform:translateY(0);opacity:1;}
}
#nav-menu a{
  display:block;
  padding:15px 18px;
  text-decoration:none;
  color:#333;
  border-bottom:1px solid #eee;
}
#nav-menu a:last-child{border:none;}
#nav-menu a:hover{background:#f5f5f5;}

/* ===== SEARCH INSIDE MENU ===== */
.search-box{
  padding:12px;
}
.search-box input{
  width:100%;
  padding:12px 15px;
  border:1px solid #ddd;
  border-radius:10px;
  font-size:1em;
  outline:none;
}

/* ===== GRID ===== */
.container{
  max-width:1500px;
  margin:auto;
  padding:20px;
}
.story-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(230px,1fr));
  gap:25px;
}
.story-card{
  background:white;
  border-radius:15px;
  overflow:hidden;
  box-shadow:0 5px 20px rgba(0,0,0,0.15);
  cursor:pointer;
  transition:.25s;
}
.story-card:hover{
  transform:translateY(-8px);
  box-shadow:0 10px 30px rgba(0,0,0,0.25);
}
.story-card img{
  width:100%;
  height:320px;
  object-fit:cover;
}
.story-info{
  padding:15px;
}
.story-info h3{
  margin:0 0 8px;
  font-size:1.2em;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.story-info p{
  margin:0;
  color:#e74c3c;
  font-size:0.9em;
}

/* ===== LOADING ===== */
.loading, .no-result{
  text-align:center;
  padding:60px;
  font-size:1.4em;
  color:#666;
}

/* ===== FLOAT ADD BUTTON ===== */
.add-btn{
  position:fixed;
  bottom:25px;
  right:25px;
  background:#e74c3c;
  color:#fff;
  width:70px;
  height:70px;
  border-radius:50%;
  font-size:40px;
  display:flex;
  justify-content:center;
  align-items:center;
  box-shadow:0 8px 20px rgba(231,76,60,0.6);
  text-decoration:none;
}

/* ===== RESPONSIVE ===== */
@media(max-width:768px){
  .story-grid{
    grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  }
  .story-card img{
    height:240px;
  }
}
</style>
</head>

<body>

<header>
  <h1>Coconut Manga</h1>
  <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
</header>

<!-- MENU DROPDOWN -->
<nav id="nav-menu">

  <div class="search-box">
    <input type="text" id="search-input" placeholder="T√¨m truy·ªán...">
  </div>

  <a href="#">Trang ch·ªß</a>
  <a href="upload.html">ƒêƒÉng truy·ªán</a>
  <a href="#">Li√™n h·ªá</a>
</nav>

<div class="container">
  <div id="story-list" class="story-grid">
    <div class="loading">ƒêang t·∫£i truy·ªán...</div>
  </div>
</div>

<a href="upload.html" class="add-btn">+</a>

<script>
function toggleMenu(){
  const nav = document.getElementById('nav-menu');
  nav.style.display = (nav.style.display === 'block') ? 'none' : 'block';
}

let stories = [];
const list = document.getElementById('story-list');
const input = document.getElementById('search-input');

fetch('stories.json?t=' + Date.now())
  .then(r => r.json())
  .then(data => {
    stories = data;
    render(stories);
  })
  .catch(()=> list.innerHTML='<div class="no-result">L·ªói t·∫£i d·ªØ li·ªáu üò¢</div>');

function render(data){
  if(data.length===0){
    list.innerHTML='<div class="no-result">Kh√¥ng t√¨m th·∫•y truy·ªán n√†o ü•∫</div>';
    return;
  }

  list.innerHTML = '';

  data.forEach(s=>{
    const div = document.createElement('div');
    div.className='story-card';
    div.onclick=()=> location.href=`story.html?id=${s.id}`;
    div.innerHTML=`
      <img src="${s.thumbnail}" alt="${s.title}" loading="lazy">
      <div class="story-info">
        <h3>${s.title}</h3>
        <p>${s.author || 'ƒêang c·∫≠p nh·∫≠t'}</p>
      </div>
    `;
    list.appendChild(div);
  });
}

input?.addEventListener('input', ()=>{
  const q = input.value.trim().toLowerCase();
  render(
    q ? stories.filter(
      s => s.title.toLowerCase().includes(q) ||
           (s.author && s.author.toLowerCase().includes(q))
    ) : stories
  );
});
</script>

</body>
</html>
